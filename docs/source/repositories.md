# Repo Structure and Public Repos

In this section we want to give you a short insight into how we structure our repositories,
and which common tools and scaffolds we use for (new) projects.

You will find all our public repositories on https://github.com/base-angewandte/. Here is a brief overview of
what the different repos are used for:

- [base-docs](https://github.com/base-angewandte/base-docs): the repo for our entry-point documentation - the thing
  you are reading right now.
- [config](https://github.com/base-angewandte/config): contains common configuration settings and generators for
  new project scaffolds.
- [pre-commit-hooks](https://github.com/base-angewandte/pre-commit-hooks): contains all our pre-commit hooks,
  we use in backend projects for linting and streamlining code quality assurance. See [](./dev_guide.md) for details
  on how we code and commit.
- [nginx](https://github.com/base-angewandte/nginx): contains the setup for running nginx as a reverse proxy for our
  actual applications.
- [base-ui-components](https://github.com/base-angewandte/base-ui-components): contains the all the common UI components
  that are used in our different frontend projects.
- [baseauth](https://github.com/base-angewandte/baseauth): a backend based on
  [MamaCAS](https://django-mama-cas.readthedocs.io/en/latest/) to provide authentication and user settings/preferences
  to other base applications.
- [portfolio-backend](https://github.com/base-angewandte/portfolio-backend) and
  [portfolio-frontend](https://github.com/base-angewandte/portfolio-frontend): contains backend and frontend for the
  _Portfolio_ application, to allow users manage their (scientific) portfolios.
- [showroom-backend](https://github.com/base-angewandte/showroom-backend) and
  [showroom-frontend](https://github.com/base-angewandte/showroom-frontend): contains backend and frontend for the
  _Showroom_ application, to showcase the (scientific) portfolios, users have entered (and published) on _Portfolio_.

## Project/Repo specific documentation

When you visit the repositories, they will provide either a _README&period;md_ with setup instructions (in case of
our frontends), or a _docs/_ folder similar to this documentation. Some of these are already rendered on readthedocs.io:

- https://portfolio-backend.readthedocs.io
- https://showroom-backend.readthedocs.io

## General backend repo structure

- The **config** directory contains our common base setup for linting, pre-commit hooks, and make commands. It is
  sourced from [config](https://github.com/base-angewandte/config) repository as a git subtree. Depending on the use
  case of the specific repository, most of the files contained in this folder will be either copied or symlinked into
  the repository's root folder. Here a few notes on these files:
  - _.flake8_, _.hadolint.yaml_, and _.isort.cfg_ will usually be linked to, as they contain the linting configuration
    to adhere to our [](./dev_guide.md#coding-conventions). No specific change on a repo basis should be needed.
  - _.pre-commit-config.yaml_ and _pyproject.toml_ will often be copied rather than be linked, particularly the
    pre-commit config, as most projects use different Python versions, and hence will need to reference different
    revision tags.
  - _base.mk_ will be included in the project's _Makefile_, and provides different `make` commands, one of which uses
    the _make-gitignore.sh_ script to generate the _.gitignore_ in the project's root folder. The _.gitignore_ in the
    config repo itself is just the most recent autogenerated version without any project-specific additions.
- The **docker** folder contains all configs and setup for docker images used by an application.
- The **docs** folder contains the actual documentation of a repository, where the index page is generated from the
  `./docs/source/index.rst` file.

### Makefile

Every repository should contain a _Makefile_ which contains at least the following:

```makefile
include .env
export

# change this to the new project's name
# this will be used in config/base.mk, so check there if unsure how to name it
# for existing projects we e.g. use "baseauth", "portfolio", "showroom", or "nginx"
PROJECT_NAME ?= project-name

include config/base.mk

## add project specific targets below like in the example placeholder
.PHONY: placeholder
placeholder:  ## placeholder for demo purposes
    echo "This is just a placeholder for demo purposes"
```

Once this _Makefile_ is created, `make help` can be used to list all available commands with a short note on what they
do. Here a few notes on some of the targets and how to use them.

### `make gitignore`

This command is used to create the repo's _.gitignore_ file from a curated set of templates. This provides the minimal
_.gitignore_ we use in all our projects. If there are some project-specific additions needed, to ignore from git
tracking, a _.gitignore.local_ file can be used, which will be concatenated to the end of the _.gitignore_.

### `make %-default`

All our common make tartest, like e.g. `make start` can be overwritten project-specifically. The common targets are
coded with a `-default` suffix (so actually `make start` will be a `make start-default`), and tab completion will
suggest the `-default`-suffixed versions. But our _base&period;mk_ adds a rule, that all `-default`-suffixed targets are
available also without the suffix, unless this specific target ist already defined in the project's _Makefile_.
